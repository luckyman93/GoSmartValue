"use strict";function formatCurrency(n){var t=!1;return n<0&&(t=!0,n=Math.abs(n)),(t?"-BWP ":"BWP ")+parseFloat(n,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()}function ClearStreetName(){$("#StreetName").val("")}function SetLocalities(n,t){$("#LocalityId").empty();ClearStreetName();$.get({url:"/api/Valuations/GetLocalities?locationId="+n+"&locationName="+t,success:function(n){$.each(n,function(){var n=this;$("#LocalityId").append('<option value="'+n.id+'" data-tokens="'+n.name+'">'+n.name+"<\/option>")})}})}function SetStreets(n,t){$("#street-list").empty();ClearStreetName();$("#street-list").append('<option>No Streets found in "'+t+'"<\/option>');$.get({url:"/api/Valuations/GetStreets?localityId="+n+"&localityName="+t,success:function(n){$("#street-list").empty();$.each(n,function(){$("#street-list").append('<option value="'+this.streetName+'" data-tokens="'+this.streetName+'">'+this.streetName+"<\/option>")})}})}$.getScript({url:"https://maps.googleapis.com/maps/api/js?key=AIzaSyCeoY8cKFVbUSyddmZL6kGiU8p3QsCHs-0&libraries=places",success:function(){}});var ValuationRequest=function(){var n={LocationId:"public variable",WardId:"public variable",PlotNo:"public variable",LandUseID:"public variable",SizeUnitsTypeID:"public variable",Size:"public variable"},t=this;this.construct=function(t){$.extend(n,t)}};$(document).ready(function(){var n;for(console.log("Document has loaded and ready..."),document.getElementById("ownership").checked?$("#ownershipQuestions").show():$("#ownershipQuestions").hide(),$.ajax({url:"/api/Valuations/GetLocations",success:function(n){var t=$("#Location");$.each(n,function(){t.append(new Option(this.name,this.id))})}}),n=(new Date).getFullYear();n>1970;n--)$("#PurchaseYear").append('<option value="'+n+'" data-tokens="'+n+'">'+n+"<\/option>");$("#ownership").on("change",function(){document.getElementById("ownership").checked?$("#ownershipQuestions").show():$("#ownershipQuestions").hide()});$("#street-list").on("click",function(){console.log("street clicked.."+$("#street-list").val());$("#StreetName").val($("#street-list").val())});$("#GetValuation").on("click",function(){console.log("Get Valuation button clicked..");$.ajax({type:"post",contentType:"application/json;",dataType:"json",url:"/api/Valuations/GetValuation",data:JSON.stringify({LocationId:$("#Location :selected").val(),LocalityId:$("#Localities :selected").val(),StreetName:$("#StreetName").val(),PlotNo:$("#PlotNo").val(),PropertyType:$("#PropertyType :selected").val(),LandUse:$("#LandUse :selected").val(),Size:$("#Size").val(),PurchasePrice:$("#PurchasePrice").val()||0,PurchaseDate:new Date($("#PurchasePrice").val(),1)}),success:function(n){console.log("successful call to GetValuations..");$("#ValuationReference").text(n.referenceNumber);$("#ValuationEstimatedValue").text(formatCurrency(n.estimatedValue));$("#ValuationRequest").hide();$("#ValuationResultfieldSet").show()}})});$("#GetFullReport").on("click",function(){var n=$("#ValuationReference").Text;console.log("Get Full Report button clicked..Reference: "+n);$.ajax({type:"Post",contentType:"application/json; charset=utf-8",dataType:"json",url:"/user/Valuations/GetFullReport",data:JSON.stringify({Reference:n,PropertyDetailsId:$("#PropertyDetailsId").Text,EstimatedValue:$("#EstimatedValue").Text})})})});