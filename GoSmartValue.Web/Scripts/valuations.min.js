$.getScript({url:"https://maps.googleapis.com/maps/api/js?key=AIzaSyCeoY8cKFVbUSyddmZL6kGiU8p3QsCHs-0&libraries=places",success:function(){console.log("got google places API JavaScripts")}});$(document).ready(function(){var map,infowindow,mapOptions={zoom:8,center:{lat:-24.6282,long:25.9231}};console.log("Document has loaded and ready...");document.getElementById("ownership").checked?$("#ownershipQuestions").show():$("#ownershipQuestions").hide();$.ajax({url:"/api/Valuations/GetLocations",success:function(result){var locations=$("#Location");$.each(result,function(){locations.append(new Option(this.name,this.id))})}});for(let i=(new Date).getFullYear();i>1970;i--)$("#PurchaseYear").append($("<option />").val(i).html(i));$("#ownership").on("change",function(){document.getElementById("ownership").checked?$("#ownershipQuestions").show():$("#ownershipQuestions").hide()});$("#Location").on("change",function(){var locationId=$("#Location :selected").val(),locationName=$("#Location :selected").html(),gaborone,ward,request;$.get({url:"/api/Valuations/GetLocalities?locationId="+locationId+"&locationName="+locationName,success:function(result){console.log("Success : localities retrieved..Count: "+result.length);$("#Localities").find("option").remove().end();$.each(result,function(){let locality=this;$("#Localities").append(new Option(locality.name,locality.id))})}});gaborone=new google.maps.LatLng(mapOptions.center.lat,mapOptions.center.long);map=new google.maps.Map(document.getElementById("map"),{center:gaborone,zoom:mapOptions.zoom});ward=$("#StreetName").val();request={query:""+ward+","+location+", Botswana",fields:["name","geometry"]};console.log(request.query+" : "+request.fields)});$("#Localities").on("change",function(){var localityId=$("#Localities :selected").val(),localityName=$("#Localities :selected").html(),gaborone,streetName,request;$.get({url:"/api/Valuations/GetStreets?localityId="+localityId+"&localityName="+localityName,success:function(street){console.log("Success : wards retrieved..Count: "+street.length);$("#street-list").empty();$.each(street,function(){console.log("Street Name: "+this.streetName+"  - ID: "+this.id);$("#street-list").append(new Option(this.streetName,this.id))})}});gaborone=new google.maps.LatLng(mapOptions.center.lat,mapOptions.center.long);map=new google.maps.Map(document.getElementById("map"),{center:gaborone,zoom:mapOptions.zoom});streetName=$("#StreetName").val();request={query:""+streetName+","+location+", Botswana",fields:["name","geometry"]};console.log(request.query+" : "+request.fields)});$("#street-list").change(function(){$("#StreetName").val($("#street-list :selected").html())});$("#GetValuation").on("click",function(){console.log("Get Valuation button clicked..");$.ajax({type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",url:"/api/Valuations/GetValuation",data:JSON.stringify({LocationId:$("#Location :selected").val(),LocalityId:$("#Localities :selected").val(),StreetName:$("#StreetName").val(),PlotNo:$("#PlotNo").val(),PropertyType:$("#PropertyType :selected").val(),LandUse:$("#LandUse :selected").val(),Size:$("#Size").val(),PurchasePrice:$("#PurchasePrice").val()||0,PurchaseDate:new Date($("#PurchasePrice").val(),1)}),success:function(result){console.log("successful call to GetValuations..");$("#ValuationReference").text(result.referenceNumber);$("#ValuationEstimatedValue").text("BWP "+result.estimatedValue);$("#ValuationRequest").hide();$("#ValuationResultfieldSet").show()}})})});$("#GetNewValuation").on("click",function(){$("#ValuationRequestForm")[0].reset();$("#Localities").empty();$("#street-list").empty();$("#ValuationRequest").show();$("#ValuationResultfieldSet").hide()});var ValuationRequest=function(){var vars={LocationId:"public variable",WardId:"public variable",PlotNo:"public variable",LandUseID:"public variable",SizeUnitsTypeID:"public variable",Size:"public variable"},root=this;this.construct=function(options){$.extend(vars,options)}};